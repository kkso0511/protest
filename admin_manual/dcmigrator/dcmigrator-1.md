---
metaLinks:
  alternates:
    - >-
      https://app.gitbook.com/s/FRc8hBWqHCHYh3E0AhFb/admin_manual/dcmigrator/dcmigrator-1
---

# DCMigrator를 사용하여 데이터를 마이그레이션하는 방법

### 개요 <a href="#a03" id="a03"></a>

DirectCloud에서는 사내 파일 서버나 네트워크 하드디스크(NAS)에서 DirectCloud로 데이터를 이전하기 위한 데이터 이동 도구인 DCMigrator를 제공하고 있습니다.\
DCMigrator는 Windows PowerShell을 사용하여 파일과 폴더를 DirectCloud로 업로드합니다.\
이 매뉴얼에서는 DCMigrator를 이용해 데이터를 이전하는 방법에 대해 설명합니다.

***

### 제한·보충사항 <a href="#a04" id="a04"></a>

* DCMigrator를 구하는 방법과 라이센스 및 운영환경에 대한 정보는 [DCMigrator 애플리케이션을 다운로드하는 방법](https://help.directcloud.net/admin_manual/dcmigrator/dcmigrator)을 참조하십시오.
* [사용자에게 1계층 폴더 생성권한을 부여하는 방법](https://help.directcloud.net/admin_manual/undefined-4/1)에 따라 DirectCloud 관리자 페이지에서 DCMigrator를 실행하는 관리자 또는 사용자에게 1계층 폴더 만들기 권한을 부여합니다.
* 여러 PC에서 동시에 DCMigrator를 실행하는 경우 동일한 원본 폴더를 지정하지 마십시오. 파일 무결성에 문제가 발생할 수 있습니다.
* 여러 PC에서 동시에 5대 이상의 DCMigrator를 실행할 수 없습니다.
* 마이그레이션할 총 파일 용량이 300GB를 초과하면 업로드한 후 파일 정보와 문서 내 텍스트가 데이터베이스에 반영되기까지 시간이 걸릴 수 있습니다.
* 100MB 이상의 파일을 업로드하는 경우 20MB 단위로 분할됩니다.
* 다음 문자가 파일 이름에 포함되어 있으면 파일을 마이그레이션할 수 없습니다.\
  \  ¥ / : \* ? “ < >
* 마이그레이션할 파일의 이름에 이전 글꼴 문자가 포함된 경우 일부 문자는 자동으로 새 글꼴로 변환됩니다.
* 대상 폴더에는 관리자 권한이 설정되어 있거나 마스터 권한이 설정되어 있어야 합니다. 적절한 액세스 권한이 설정되어 있지 않으면 DCMigrator가 데이터를 마이그레이션하지 못합니다.
* My Box 메뉴 바로 아래로 데이터를 마이그레이션할 수 있지만 Shared Box 메뉴 바로 아래로 데이터를 마이그레이션할 수는 없습니다.
* <마스터> 권한이 있는 사용자가 DCMigrator를 실행하면 대상 폴더의 액세스 수준 검사가 생략되므로 데이터를 빠르게 마이그레이션할 수 있습니다.
* [사용자와 Guest에게 동시 로그인을 허용하지 않는 방법](https://help.directcloud.net/admin_manual/images-and-media/guest-2)에서 '동시 로그인'을 '사용안함'으로 설정한 경우, DCMigrator로 데이터 이관을 진행 중인 사용자와 동일한 사용자 ID로 다른 어플리케이션에 로그인하면 DCMigrator와의 연결이 해제됩니다.\
  동시 로그인을 허용하는 방법에 대해서는, [사용자와 Guest에게 애플리케이션별로 하나의 로그인만 허용하는 방법](https://help.directcloud.net/admin_manual/images-and-media/guest-3) 또는 [사용자와 Guest에게 동시 로그인을 허용하는 방법](https://help.directcloud.net/admin_manual/images-and-media/guest-4)을 참조해 주십시오.
* 관리 페이지의 '보안' > '접근 제어' 메뉴에 있는 '사용자의 IP 주소 제한'에서, 등록된 IP 주소 그룹으로부터의 접근만 허용하도록 설정되어 있는 경우에는, 그 외의 IP 주소로는 DCMigrator를 실행할 수 없습니다.
* DCMigrator로 업로드할 때 덮어쓴 파일을 복구할 수 없습니다.
* DCMigrator는 인증 유형 프록시를 지원하지 않습니다.
* DCMigrator에서 마이그레이션하는 폴더와 파일을 조작하지 마십시오.
* DCMigrator를 처음 사용하는 경우, DCMigrator를 사용할 수 있는 권한을 활성화해야 합니다. 이용을 시작하기 전에 고객 센터로 문의해주세요.
* 지금까지 DCMigrator를 사용한 적이 있다면 사용을 신청할 필요가 없습니다.
* 데이터를 옮길 때에는 최신 버전의 DCMigrator로 작업을 진행해 주시기 바랍니다.
* 데이터 이동 이외의 목적으로 DCMigrator를 사용하지 말아주십시오.
* Warm Storage를 사용할 수 있다면 데이터의 이동 대상으로 Warm Storage의 폴더를 지정할 수 있습니다.
* Cold Storage를 계약하고 있는 경우에는 데이터의 이동 대상으로 Cold Storage의 폴더를 지정할 수 있습니다.
* 이동 대상이 Cold Storage인 경우에는 다음 사항에 주의해야 합니다.
  * Cold Storage는 파일의 덮어쓰기를 지원하지 않기 때문에 --mirror 옵션을 지정하여 데이터를 이전할 수 없습니다.
  * \--overwrite 옵션을 지정하면, 이동원과 이동 대상에 날짜나 용량이 다른 동일한 이름의 파일이 있는 경우 파일명 끝에 자동으로 숫자가 추가되어 별도 파일로 업로드됩니다.
* DCMigrator의 이동 대상으로 Connect, DLP 의 폴더는 지정할 수 없습니다.

***

### 절차 <a href="#a05" id="a05"></a>

{% hint style="warning" %}
**PowerShell 시작**
{% endhint %}

1. Windows 키 + R 키를 누릅니다.\
   파일 이름으로 실행 화면이 표시됩니다.



2. 이름에 powershell을 입력하고 확인 버튼을 클릭합니다.\
   Windows PowerShell 화면(이하 PowerShell)이 시작됩니다.



3. PowerShell 프롬프트에 표시되는 현재 디렉터리가 사용자 홈 디렉터리인지 확인합니다.\
   사용자명에는 본인의 사용자명이 표시됩니다.\
   \
   `PS C:\Users\사용자이름>`\
   \
   \
   \
   \
   \
   \
   사용자 홈 디렉터리에 있지 않은 경우에는 `cd C:\Users\사용자이름` 과 같이 명령을 실행해 이동해 주십시오.



4. cd 명령으로 데스크톱으로 이동합니다.\
   복사한 명령을 PowerShell에 붙여넣었을 때 정상적으로 동작하지 않는 경우에는 PowerShell에 직접 명령을 입력해 주십시오.\
   \
   `PS C:\Users\사용자이름> cd Desktop ⏎`\
   `PS C:\Users\사용자이름\Desktop>`\
   \
   이후의 절차에서는 프롬프트 `PS C:\Users\사용자이름\Desktop>` 부분을 '>' 로 생략하여 설명합니다.



{% hint style="warning" %}
**데이터 마이그레이션 테스트**
{% endhint %}

실제 데이터를 마이그레이션하기 전에 더미 데이터를 만들어 데이터 마이그레이션을 테스트합니다.

1. md 명령으로 테스트용 "testfolder" 폴더를 만든 다음 fsutil 명령으로 테스트용 1KB 파일을 세 개 만듭니다.\
   \
   `> md testfolder ⏎` \
   `> fsutil file createnew testfolder \ testfile.txt 1024 ⏎`\
   `> fsutil file createnew testfolder \ testfile2.txt 1024 ⏎`\
   `> fsutil file createnew testfolder \ testfile3.txt`



2. 다음 명령 형식에서 1단계에서 "testfolder" 폴더 아래에 만든 파일을 DirectCloud로 마이그레이션하는 명령을 실행합니다.\
   \
   **NOTE**

* `--mirror` 옵션을 사용하여 실행하면 대상 폴더가 원본과 동일한 상태가 됩니다. 하위 폴더가 있는 경우 해당 폴더도 처리 대상이 됩니다.\
  대상 폴더의 파일을 덮어쓰거나 삭제할 수 있으므로 실행할 때는 주의하십시오.
* 원본 폴더의 경로에 지정한 폴더 자체는 업로드되지 않습니다. 이름이 같은 폴더 아래로 데이터를 마이그레이션하려면 대상 폴더의 경로에 이름이 같은 폴더를 지정해야 합니다.\
  대상에 지정한 폴더가 없으면 자동으로 만들어집니다.\
  **명령 형식:**\
  `DCMigrator.exe "`` `_`< 원본 폴더 경로 >`_` ``" "/Shared Box/`` `_`< 대상 폴더 경로 >`_` ``/" --mirror`\
  \
  **데스크톱의 "testfolder" 폴더를 마이그레이션하는 경우의 실행 예 :**\
  `> . \ DCMigrator.exe "testfolder" "/Shared Box/mig/testfolder/" --mirror ⏎`



3. 회사 ID, 사용자 ID, 비밀번호를 입력하라는 메시지가 표시되므로 순서대로 입력하고 Enter 키를 누릅니다.\
   \
   `Company ID:`` `_`< 회사 ID>`_` ``⏎`\
   `User ID:`` `_`< 사용자 ID>`_` ``⏎`\
   `Password:`` `_`< 비밀번호>`_` ``⏎`\
   \
   인증에 성공하면 데이터 마이그레이션이 시작됩니다.



4. 데이터 마이그레이션이 완료되고 INFO Ended : 행이 출력되었는지 확인합니다.\
   \
   `(생략)`\
   `2023-11-30 11:03:53 INFO NewFolder (3 files) /mig/testfolder/`\
   `2023-11-30 11:03:54 INFO NewFile (1.0K) /mig/testfolder/testfile3.txt`\
   `(생략 )`\
   `2023-11-30 11:03:54 INFO Total : 3.0K, 1 Folders, 3 Files`\
   `2023-11-30 11:03:54 INFO Uploaded : 3.0K, 1 Folders, 3 Files`\
   `2023-11-30 03:54 INFO Outdated : 0B, 0 Folders, 0 Files`\
   `2023-11-30 11:03:54 INFO Failed : 0B, 0 Folders, 0 Files`\
   `2023-11-30 11:03:54 INFO Ended : 1 30 11:03:54 (00h: 01m: 30s)`\
   \
   데이터 마이그레이션이 완료되면 데스크톱에 'logs' 폴더가 만들어지고 업로드 실행 결과가 로그 파일에 기록됩니다.\
   로그 파일에 대한 자세한 내용은 DCMigrator 실행 로그 및 오류 로그를 확인하는 방법을 참조하십시오.



{% hint style="warning" %}
**DCMigrator 명령 옵션**
{% endhint %}

| 옵션                     | 설명                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| –-mirror               | <p>원본 폴더와 대상 폴더의 차이를 확인해, 대상 폴더를 원본 폴더와 동일한 상태로 맞춥니다.<br>하위 폴더가 있는 경우에는 그 하위 폴더도 모두 처리 대상이 됩니다.</p><ul><li>대상 폴더에 존재하지 않는 데이터는 새로 업로드됩니다.</li><li>원본 폴더와 대상 폴더에 동일한 이름이지만 날짜나 용량이 다른 파일이 있을 경우, 해당 파일은 덮어쓰기 업로드됩니다.</li><li>파일 이름, 생성 일시, 수정 일시가 완전히 동일한 파일이 이미 있는 경우에는 처리가 건너뛰어집니다.</li><li>대상 폴더에 원본 폴더에는 없는 데이터가 있을 경우, 대상 폴더의 그 데이터는 삭제됩니다.<br></li></ul><p><strong>NOTE</strong><br>--mirror 옵션을 사용하지 않고 DCMigrator.exe 명령을 실행한 경우에는 다음과 같이 처리됩니다.</p><ul><li>원본 폴더에만 존재하는 파일은 대상 폴더에 업로드됩니다.</li><li>대상 폴더에 같은 이름의 파일이 이미 있을 경우, 파일은 업로드되지 않습니다.</li><li>대상 폴더에 원본 폴더에는 없는 데이터가 있더라도, 대상 폴더의 데이터는 삭제되지 않습니다.</li></ul> |
| --overwirte            | <p>원본 폴더와 대상 폴더에 동일한 이름의 파일이 있을 때, 날짜나 용량이 다른 파일만 덮어쓰기 업로드하고 싶을 때 지정하는 옵션입니다.<br>그 외의 동일한 이름의 파일은 처리가 스킵됩니다.<br>그 밖의 파일들은, 옵션을 지정하지 않은 경우와 동일하게 업로드됩니다.<br></p><p><strong>NOTE</strong><br>Cold Storage는 파일 덮어쓰기를 지원하지 않기 때문에, 파일명 끝에 숫자가 추가되어 별도 파일로 업로드됩니다.</p><p>파일명 형식: <code>&#x3C;파일명>(n).&#x3C;확장자></code><br>파일명 예: <code>파일(1).docx</code></p>                                                                                                                                                                                                                                                                      |
| --print-outdated-files | <p>--mirror 옵션과 함께 이 옵션을 지정하여 DCMigrator.exe 명령을 실행하면, 대상 폴더에 동일한 파일명·생성 일시·수정 일시의 파일이 존재하여 처리가 스킵된 경우, 로그에는<br>“Outdated &#x3C;경로>” 형식으로 기록됩니다.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --upload\_timeout=<초>  | <p>시간 초과 시간을 지정할 수 있습니다.<br>최대 60개까지 지정할 수 있습니다.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |



{% hint style="warning" %}
**데이터 마이그레이션**
{% endhint %}

데이터 마이그레이션 테스트에 사용한 명령을 수정하고 실제 데이터를 마이그레이션합니다.\
예를 들어 D 드라이브의 '매뉴얼' 이라는 폴더를 DirectCloud의 'Shared Box' > '매뉴얼' 폴더로 마이그레이션하는 경우 다음과 같이 실행합니다.

1. 다음 명령 형식에서 실제 폴더를 업로드하는 명령을 실행합니다.\
   \
   `> . \ DCMigrator.exe "D: \ 매뉴얼" "/Shared Box/매뉴얼/" --mirror ⏎`\
   \
   데이터 마이그레이션을 테스트하고 자격 증명을 입력하고 명령을 실행하면 실행한 DCMigrator.exe가 있는 폴더에 세션 정보가 기록된 DCMigrator.session 파일이 만들어집니다. 이 파일이 있는 상태에서 명령을 실행하면 자격 증명을 입력할 필요가 없습니다.



2. 데이터 마이그레이션이 완료되고 "INFO Ended:" 행이 출력되었는지 확인합니다.\
   대상에 DirectCloud 루트 폴더('공유' 폴더)를 지정하면 'INFO Total'에 '0B'가 표시됩니다.\
   \
   `(생략)`\
   `2023-11-30 11:23:15 INFO Total : 147.2M, 7 Folders, 43 Files 2023-11-30`\
   `11:23:15 INFO Uploaded : 147.2M, 7 Folders, 43 Files1-20`\
   `11:23:15 INFO Outdated : 0B, 0 Folders, 0 Files`\
   `2023-11-30 11:23:15 INFO Failed : 0B, 0 Folders, 0 Files`\
   `2023-11-30 11:23:15 INFO Ended 11-30 11:23:15 (00h: 00m: 13s)`
